<!DOCTYPE html>
<html lang="en">
<% include header %>
<body>
    <% include navbar %>
 	
	<div class="container">
        <div class="page-header">
			<h1 style="text-align: center;">
				Personal Profile
			</h1>
			<div class="profile_picture">
				<% if (user.image.contentType) { %>
					<img id="image" src="">
					<script>
						console.log('here');
						// in Jade: 'data: user.image.contentType; base64, user.image.data'
						document.getElementById('image').src = "data:" + "<%=user.image.contentType%>" + ";base64," + "<%=user.image.data%>";
					</script>
				<% } else { %>
				<% } %>
			</div>
        </div>
		
		<div class="container">
			<div class="col-sm-6">
				<div class="well">
					<h2><span class="fa fa-user"></span> Personal Information</h2>
					<strong>Name</strong>
					<%= user.local.name %>
					<br/>
					<strong>Email</strong>
					<%= user.local.email %>
					<br/>
					<strong>Interests:</strong>
					<br/>
					<%= user.local.interest1 %>
					<br/>
					<%= user.local.interest2 %>
					<br/>
					<%= user.local.interest3 %>
					<br/>
					
					<% if (user.local.phonenum) { %>
						<strong>Phone number:</strong>
						<%= user.local.phonenum %>
						</br>
					<% } %>
						
					<strong>Background</strong>
					<%= user.local.background %>
					</br>
					<strong>Achievements</strong>
					<%= user.local.achievements %>
					</br>
					<strong>GymBud Goals</strong>
					<%= user.local.goals %>
					</br>
					<strong>User Status:</strong>
					
					<% if (user.local.trainer_filter) { %>
						Trainer
					<% } else { %>
						Gym Goer
					<% } %>
					<br/>
					
					<form action='/edit-profile'>
						<input type='submit' value='Edit Profile'>
					</form>
				</div>
			</div>
			
			
				<div class="profile_picture">
					<% if (user.image.contentType) { %>
						<div class="well col-xs-6 col-sm-4 col-md-4">
							<h2>
							<span class="fa fa-picture-o"></span> Change your picture:
							</h2>
							<form id="formUpload" method="post" action="uploadImage" enctype="multipart/form-data">
							  <input id="image" type="file" name="image"/>
							  <br/>
							  <button id="btnSubmit" type="submit">Submit</button>
							</form>
						</div>
					<% } else { %>
						<div class="well col-xs-6 col-sm-4 col-md-4">
							<h2>
							<span class="fa fa-picture-o"></span> Add a Profile Picture
							</h2>							
							<form id="formUpload" method="post" action="/uploadImage" enctype="multipart/form-data">
							  <input id="image" type="file" name="image"/>
							  <br/>
							  <button id="btnSubmit" type="submit">Submit</button>
							</form>
						</div>
					<% } %>
				</div>
			
			<div class="col-sm-6">
				<div class="well chat chatArea">
					<ul class="messages">
						<input type="hidden" id="toField" value="<%=to%>"/>
						<input type="hidden" id="username" value="<%= user.local.email %>"/>
						<input placeholder="Type here..." class="inputMessage"/>
					</ul>
				</div>
			</div>
			<br/>
			
			<div class="col-sm-6">
				<% if (user.facebook.accessToken) { %>
					<div class="well">
						<h2>
						<span class="fa fa-facebook"></span> Facebook Verified!
						</h2>
					</div>
				<% } else { %>
					<div class="well">
						<h2>
						<span class="fa fa-facebook"></span> Login with Facebook!
						</h2>
						<br>
						<a href='/auth/facebook/' class='btn btn-primary'> Verify With Facebook </a>
					</div>
				<% } %>
			</div>
			
			<div class="col-sm-6 well">
				<a href="/add-event" class="btn btn-primary"> Create a new Event </a>
			  
				<% for (var i = 0; i < events.length; i++) { %>
					<h3>
					  <%= events[i].description %>
					</h3>
					<h4>
					  With: <%= events[i].person1 %> and <%= events[i].person2 %>
					</h4>
					<h4>
					  On: <%= events[i].date %>
					</h4>
					<h4>
					  At: <%= events[i].place %>
					</h4>
				<% } %>
			</div>

			<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
			<script src="/socket.io/socket.io.js"></script>
			<script src="/main.js"></script>
	 
		</div>
		<!-- inner container -->
	
		<hr/>
		<% include footer %>	
	</div>
	<!-- container -->
	
    <script type="text/javascript">
        $(document).ready(function() {
            $('#profile').addClass("active");
        });
    </script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script
        src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
</body>
</html>
